/* Creacion de las tablas */
/* Aquí he puesto de PK las 3 para hacerlo lo más robusto posible, por si hay dos autores con el mismo nombre y apellidos */
CREATE TABLE AUTORES (
	Id INTEGER (4) AUTO_INCREMENT PRIMARY KEY,
	Nombre VARCHAR (40),
    Apellidos VARCHAR (80),
    Fecha_nac DATE
);
CREATE TABLE EDITORIALES (
	Nombre VARCHAR (50) PRIMARY KEY,
    Razon_social VARCHAR(50)
);
CREATE TABLE TEMATICAS (
	Nombre VARCHAR(50) PRIMARY KEY 
);
/* La PK de TEMATICAS SE QUEDA COMO FK EN LIBROS AL SER 1:N */
/* Lo mismo pero con la de Editoriales al interpretar que un libro es solo de una editorial */
CREATE TABLE LIBROS (
	ISBN VARCHAR (13) PRIMARY KEY,
    Titulo VARCHAR (90),
    Ano_publicacion INTEGER(4),
    Nombre_tematica VARCHAR(50),
    Nombre_editorial VARCHAR(50),
    Id_autor INTEGER (4),
    FOREIGN KEY (Nombre_tematica) REFERENCES TEMATICAS(Nombre),
    FOREIGN KEY (Nombre_editorial) REFERENCES EDITORIALES(Nombre),
    FOREIGN KEY (Id_autor) REFERENCES AUTORES(Id)
);
/* INSERCIÓN DE DATOS PARA PROBAR FUNCIONAMIENTO */
INSERT INTO EDITORIALES VALUES ('PLANETA','Ninguna');
INSERT INTO EDITORIALES VALUES ('O`REILLY','Ninguna');
INSERT INTO EDITORIALES VALUES ('ETXEBERRIA','Ninguna');
INSERT INTO EDITORIALES VALUES ('RBA','Ninguna');

INSERT INTO TEMATICAS VALUES ('HISTORIA');
INSERT INTO TEMATICAS VALUES ('INFORMÁTICA');
INSERT INTO TEMATICAS VALUES ('NOVELA');

INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('FRANCISCO','DIAZ DIAZ');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('ALBERTO','MIGUELEZ LOPEZ');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('RAÚL','OCHANDIANO RIVERA');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('FERNANDO','MARTOS ETXEBERRIA');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('JOANNE','ROWLING');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('MIGUEL','LIMÓN IGNACIO');
INSERT INTO AUTORES (Nombre,Apellidos) VALUES ('DAVID','MOZAS JEREZ');

INSERT INTO LIBROS VALUES (1,'HISTORIA DE ALEMANIA',2001,'HISTORIA','PLANETA',1);
INSERT INTO LIBROS VALUES (2,'HISTORIA DE ESPAÑA',2002,'HISTORIA','PLANETA',1);
INSERT INTO LIBROS VALUES (3,'HISTORIA DE FRANCIA',2002,'HISTORIA','PLANETA',1);
INSERT INTO LIBROS VALUES (4,'LA SOCIEDAD MEDIEVAL',2001,'HISTORIA','PLANETA',2);
INSERT INTO LIBROS VALUES (5,'ANGULAR DESDE 0',2013,'INFORMÁTICA','O`REILLY',3);
INSERT INTO LIBROS VALUES (6,'CREPÚSCULO VAMPIROS',1999,'NOVELA','RBA',4);
INSERT INTO LIBROS VALUES (7,'CREPÚSCULO ZOMBIES',1998,'NOVELA','RBA',4);
INSERT INTO LIBROS VALUES (8,'CREPÚSCULO MONSTERS',1997,'NOVELA','RBA',4);
INSERT INTO LIBROS VALUES (9,'HARRY POTTER I',2000,'NOVELA','RBA',5);
INSERT INTO LIBROS VALUES (10,'HARRY POTTER II',2001,'NOVELA','RBA',5);
INSERT INTO LIBROS VALUES (11,'HARRY POTTER III',2001,'NOVELA','RBA',5);
INSERT INTO LIBROS VALUES (12,'HARRY POTTER IV',2002,'NOVELA','RBA',5);
INSERT INTO LIBROS VALUES (13,'LA SOCIEDAD INDUSTRIAL',1972,'HISTORIA','PLANETA',2);
INSERT INTO LIBROS VALUES (14,'LOS TEMPLARIOS',1998,'HISTORIA','PLANETA',6);
INSERT INTO LIBROS VALUES (15,'LOS ALBIGENSES',1986,'HISTORIA','PLANETA',6);
INSERT INTO LIBROS VALUES (16,'LOS GODOS',2001,'HISTORIA','PLANETA',6);
INSERT INTO LIBROS VALUES (17,'SPRING',2014,'INFORMÁTICA','O`REILLY',7);
INSERT INTO LIBROS VALUES (18,'JQUERY',2015,'INFORMÁTICA','O`REILLY',7);
INSERT INTO LIBROS VALUES (19,'MYSQL',2016,'INFORMÁTICA','O`REILLY',7);
INSERT INTO LIBROS VALUES (20,'ORACLE',2003,'INFORMÁTICA','O`REILLY',7);
/* Al final esto no tiene importancia, era un planteamiento distinto al del ejercicio 
Según lo veo yo la relación de LIBROS con AUTORES es de N:M por tanto tengo que crear una tabla aparte 
CREATE TABLE LIBROS_AUTORES (
	ISBN VARCHAR(90),
    Nombre VARCHAR (40),
    Apellidos VARCHAR (80),
    Fecha_nac DATE,
    FOREIGN KEY (ISBN) REFERENCES LIBROS(ISBN),
    FOREIGN KEY (Nombre,Apellidos,Fecha_nac) REFERENCES AUTORES (Nombre,Apellidos,Fecha_nac),
    CONSTRAINT PRIMARY KEY (ISBN,Nombre,Apellidos,Fecha_nac)
)
*/
/* Comprobación */
SELECT * FROM LIBROS;
SELECT * FROM AUTORES;
SELECT * FROM EDITORIALES;
SELECT * FROM TEMATICAS;
